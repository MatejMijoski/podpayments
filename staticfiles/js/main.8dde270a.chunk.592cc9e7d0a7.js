(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{270:function(e,t,a){},294:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);var n=a(6),s=a(1),r=a.n(s),i=a(14),o=a.n(i),c=(a(270),a(24)),l=a(25),d=a(27),h=a(26),u=a(34),j=a(19),m=a(9),b=a(360),p=a(373),g=a(374),O=a(376),x=a(375),f=a(335),v=a(254),y=a.n(v),w=a(38),S=a(23),k=a(21),C=a.n(k),N=a(43),T=a.n(N),I="http://127.0.0.1:8000/",_=a(377),D=a(368),F=a(364),A=a(365),R=a(370),P=a(369),W=a(64),B=a.n(W),E=a(362);C.a.defaults.xsrfHeaderName="X-CSRFTOKEN",C.a.defaults.xsrfCookieName="csrftoken";var M=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).useStyles=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),n.state={email:"",password:"",redirect:"/",res:[]},n.handleChange=n.handleChange.bind(Object(S.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={"X-CSRFTOKEN":T.a.get("csrftoken")},n=Date.now();C.a.post(I+"api/login",{username:this.state.email,password:this.state.password},{headers:a}).then((function(e){sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("timeCreated",n),window.location="/"})).catch((function(e){e.response&&t.setState({res:e.response.status})}))}},{key:"render",value:function(){return sessionStorage.getItem("token")&&"null"!==sessionStorage.getItem("token")?Object(n.jsx)(j.a,{to:this.state.redirect}):Object(n.jsxs)(E.a,{style:{height:"90vh"},component:"main",maxWidth:"xs",children:[Object(n.jsx)(F.a,{}),Object(n.jsxs)("div",{className:this.useStyles.paper,style:{padding:"25% 0px"},children:[Object(n.jsx)(_.a,{className:this.useStyles.avatar,style:{margin:"auto"},children:Object(n.jsx)(B.a,{})}),Object(n.jsx)(f.a,{component:"h1",variant:"h5",style:{textAlign:"center"},children:"Sign in"}),Object(n.jsxs)("form",{className:this.useStyles.form,noValidate:!0,onSubmit:this.handleSubmit,children:[Object(n.jsx)(A.a,{onChange:this.handleChange,value:this.state.email,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(A.a,{onChange:this.handleChange,value:this.state.password,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(n.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:this.useStyles.submit,children:"Sign In"}),Object(n.jsx)(P.a,{container:!0,children:Object(n.jsx)(P.a,{item:!0,xs:!0,children:Object(n.jsx)(R.a,{href:"/change-password",variant:"body2",children:"Forgot password?"})})}),"400"==this.state.res?Object(n.jsx)("h5",{className:"alert alert-danger",role:"alert",children:"Invalid email or password. Please try again."}):"","500"==this.state.res?Object(n.jsx)("h5",{className:"alert alert-danger",role:"alert",children:"The server can't be reached. Please try again later or contact the server administrator."}):""]})]})]})}}]),a}(s.Component),L=a(249),z=a.n(L),X=null,q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).createOrder=function(e,t,a){if(n.state.amount)return t.order.create({purchase_units:[{description:"Payment for POD",amount:{currency_code:"USD",value:n.refs.paypal.value}}]})},n.onApprove=function(e,t){var a={Authorization:"Token "+sessionStorage.getItem("token")};C.a.post(I+"api/",{orderID:e.orderID},{headers:a})},n.useStyles=Object(b.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:"20px auto"},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},root1:{flexGrow:1},paper:{height:140,width:100},control:{padding:e.spacing(2)}}})),n.state={showButtons:!1,loading:!0,paid:!1,amount:"0"},window.React=r.a,window.ReactDOM=o.a,n.onChange=n.onChange.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isScriptLoaded,a=e.isScriptLoadSucceed;t&&a&&(X=window.paypal.Buttons.driver("react",{React:r.a,ReactDOM:o.a}),this.setState({loading:!1,showButtons:!0}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.isScriptLoaded,a=e.isScriptLoadSucceed;!this.state.showButtons&&!this.props.isScriptLoaded&&t&&a&&(X=window.paypal.Buttons.driver("react",{React:r.a,ReactDOM:o.a}),this.setState({loading:!1,showButtons:!0}))}},{key:"onChange",value:function(e){this.setState({amount:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.showButtons,s=(t.loading,t.paid,"");return t.amount<=0&&(s="validate"),Object(n.jsx)(P.a,{item:!0,xs:12,lg:12,sm:12,children:Object(n.jsx)(P.a,{container:!0,justify:"center",spacing:5,children:Object(n.jsxs)(E.a,{maxWidth:"sm",children:[Object(n.jsx)(f.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:"Enter amount:"}),Object(n.jsxs)("div",{className:"input-group mb-3",children:[Object(n.jsx)("div",{className:"input-group-prepend",children:Object(n.jsx)("span",{className:"input-group-text",children:"$"})}),Object(n.jsx)("input",{type:"number",ref:"paypal",name:"amount",onChange:this.onChange,className:"form-control"})]}),a&&Object(n.jsx)("div",{className:s,children:Object(n.jsx)(X,{createOrder:function(t,a,n){return e.createOrder(t,a,n)},onApprove:function(t,a){return e.onApprove(t,a)}})})]})})})}}]),a}(r.a.Component),V=z()("https://www.paypal.com/sdk/js?client-id=AX7mkMXJdVtrtrmhLR75Utm2_7M4HQmlr_sY2gEu5rFyJGkHBZBkmD9cNXElFv4COnre6f1jCIQ1ztY-&disable-funding=credit&currency=USD")(q),G=(a(294),a(231)),J=a(250),K=a.n(J),U=a(371),H=a(372),Y=(a(327),a(130)),Q=a(255),Z=a(46),$=a(253),ee=a.n($),te=Object(b.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:Z.a.red[600],height:56,width:56},differenceIcon:{color:Z.a.red[900]},differenceValue:{color:Z.a.red[900],marginRight:e.spacing(1)},cards:{width:"70%",margin:"0px auto 10px"}}})),ae=function(e){var t=e.className,a=e.funds,s=e.text,r=Object(Q.a)(e,["className","funds","text"]),i=te();return Object(n.jsx)(U.a,Object(Y.a)(Object(Y.a)({xs:6,className:Object(m.a)(i.root,t,i.cards)},r),{},{children:Object(n.jsx)(H.a,{children:Object(n.jsxs)(P.a,{container:!0,justify:"space-between",spacing:3,children:[Object(n.jsxs)(P.a,{item:!0,children:[Object(n.jsx)(f.a,{color:"textSecondary",gutterBottom:!0,variant:"h6",children:s}),Object(n.jsxs)(f.a,{color:"textPrimary",variant:"h3",children:["$",a]})]}),Object(n.jsx)(P.a,{item:!0,children:Object(n.jsx)(_.a,{className:i.avatar,children:Object(n.jsx)(ee.a,{})})})]})})}))},ne=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).useStyles=Object(b.a)((function(e){return{root1:{flexGrow:1}}})),n.state={transactions:[],amount:[],loading:!0,redirect:"/signin",showPayPal:!1,failed:!1,timeCreated:"",currentTime:""},n.OnClick=n.OnClick.bind(Object(S.a)(n)),function(){var e=sessionStorage.getItem("timeCreated");if(Date.now()-e>=1e10)C.a.get("https://webcodefy.herokuapp.com/api/logout/",{headers:{Authorization:"Token "+sessionStorage.getItem("token")}}).then((function(e){sessionStorage.clear()})),j.a}(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.a.get(I+"api/",{headers:{Authorization:"Token "+sessionStorage.getItem("token")}}).then((function(t){setTimeout((function(){e.setState({amount:t.data})}),800)})),C.a.get(I+"api/payments/?type=company",{headers:{Authorization:"Token "+sessionStorage.getItem("token")}}).then((function(t){setTimeout((function(){e.setState({transactions:t.data,loading:!1})}),500)}))}},{key:"OnClick",value:function(e){var t=this;e.preventDefault(),"failed-transactions"==e.target.dataset.type?this.setState({failed:!0}):this.setState({failed:!1}),C.a.get(I+"api/payments/?type="+e.target.dataset.type,{headers:{Authorization:"Token "+sessionStorage.getItem("token")}}).then((function(e){setTimeout((function(){t.setState({transactions:e.data,loading:!1})}),500)}))}},{key:"render",value:function(){var e;return sessionStorage.getItem("token")||null!==sessionStorage.getItem("token")?Object(n.jsx)("div",{children:this.state.loading?null:Object(n.jsxs)(G.a,{children:[Object(n.jsxs)(P.a,{container:!0,xl:12,lg:12,xs:12,sm:12,style:{margin:"70px auto"},className:this.useStyles.root1,children:[Object(n.jsxs)(P.a,{item:!0,xl:6,lg:6,sm:9,xs:12,style:{margin:"auto",textAlign:"center"},children:[Object(n.jsx)(ae,{funds:this.state.amount.available_amount,text:"Available Funds"}),Object(n.jsx)(ae,{funds:this.state.amount.failed_transactions_amount,text:"Failed Transactions Funds"})]}),Object(n.jsx)(P.a,{item:!0,xl:6,lg:6,xs:12,sm:12,style:{margin:"auto",textAlign:"center"},children:Object(n.jsx)(U.a,(e={xs:6,lg:12},Object(w.a)(e,"xs",12),Object(w.a)(e,"sm",12),Object(w.a)(e,"children",Object(n.jsx)(H.a,{style:{padding:"40px 15px",background:"#ffffffe0",borderRadius:"10px"},children:Object(n.jsx)(V,{})})),e))})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)(G.a,{style:{textAlign:"center"},children:[Object(n.jsx)("button",{className:"btn btn-outline-primary btns",onClick:this.OnClick,"data-type":"client",children:"Client"}),Object(n.jsx)("button",{className:"btn btn-outline-primary btns",onClick:this.OnClick,"data-type":"company",children:"Company"}),Object(n.jsx)("button",{className:"btn btn-outline-primary btns",onClick:this.OnClick,"data-type":"failed-transactions",children:"Failed Transactions"})]}),Object(n.jsx)(G.a,{style:{background:"white",padding:"10px 15px",borderRadius:"10px"},children:this.state.transactions.length>0?Object(n.jsx)(se,{failed:this.state.failed,transactions:this.state.transactions}):Object(n.jsx)(f.a,{style:{margin:"18px",padding:"8px"},variant:"h5",color:"textSecondary",align:"center",children:"There are no transactions."})})]})}):Object(n.jsx)(j.a,{to:this.state.redirect})}}]),a}(s.Component);function se(e){var t=e.transactions,a=e.failed,s=t;t.length&&Object.keys(t).forEach((function(e){var a=new Date(t[e].transaction_date);t[e].transaction_date=""+a}));var r=[{title:"Transaction Amount",data:"transaction_amount"},{title:"Transaction Date",data:"transaction_date"}];return a?r.push({title:"Order ID",data:"order_id"}):r.push({title:"Available Amount (after transaction)",data:"available_amount"}),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h5",{className:"mt-2 mb-4 text-center",children:"Recent Transactions"}),Object(n.jsx)(K.a,{data:s,columns:r,striped:!0,hover:!0,responsive:!0})]})}var re=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={redirect:"/signin"},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){C.a.get(I+"api/logout/",{headers:{Authorization:"Token "+sessionStorage.getItem("token")}}).then((function(e){sessionStorage.clear(),window.location="/signin"}))}},{key:"render",value:function(){return Object(n.jsx)(j.a,{to:this.state.redirect})}}]),a}(s.Component),ie=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).useStyles=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),n.state={email:"",redirect:"/",flag:!1},n.handleChange=n.handleChange.bind(Object(S.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={"X-CSRFTOKEN":T.a.get("csrftoken")};C.a.post(I+"api/reset-password/",{email:this.state.email},{headers:a}).then((function(e){"204"==e.status&&t.setState({flag:!0})}))}},{key:"render",value:function(){return Object(n.jsxs)(E.a,{component:"main",maxWidth:"xs",style:{height:"90vh",paddingTop:"5%"},children:[Object(n.jsx)(F.a,{}),Object(n.jsxs)("div",{className:this.useStyles.paper,children:[Object(n.jsx)(_.a,{className:this.useStyles.avatar,style:{margin:"auto"},children:Object(n.jsx)(B.a,{})}),Object(n.jsx)(f.a,{component:"h1",variant:"h5",style:{textAlign:"center"},children:"Forgot Password"}),this.state.flag?Object(n.jsx)(f.a,{component:"h1",variant:"h5",children:"A password reset email has been sent. Please check your email and click on the link."}):Object(n.jsxs)("form",{className:this.useStyles.form,noValidate:!0,onSubmit:this.handleSubmit,children:[Object(n.jsx)(A.a,{onChange:this.handleChange,value:this.state.email,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(n.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:this.useStyles.submit,children:"Submit"})]})]})]})}}]),a}(s.Component),oe=a(90),ce=(a(328),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).useStyles=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),n.state={new_password:"",new_password_repeat:"",flag:!1,redirect:"/",errors:[],errorFlag:!1},n.handleChange=n.handleChange.bind(Object(S.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;this.array=[],this.setState({errors:this.array}),e.preventDefault();var a={"X-CSRFTOKEN":T.a.get("csrftoken")},n=new URLSearchParams(window.location.search).get("token"),s=new RegExp("(?=.*?\\d)(?=.*?[a-zA-Z])(?=.*?[^\\w\\s]).{8,}");e.target[0].value||this.setState((function(e){return{errors:[].concat(Object(oe.a)(e.errors),["This field can't be empty."])}})),e.target[0].value.length<8&&this.setState((function(e){return{errors:[].concat(Object(oe.a)(e.errors),["This field must be longer than 8 characters."])}})),s.test(e.target[0].value)||this.setState((function(e){return{errors:[].concat(Object(oe.a)(e.errors),["This field has to have at least 1 number, 1 letter and 1 character."])}})),e.target[0].value!==e.target[2].value&&this.setState((function(e){return{errors:[].concat(Object(oe.a)(e.errors),["The passwords don't match."])}})),setTimeout((function(){0==t.state.errors.length&&C.a.put(I+"api/reset-password-confirm/?token="+n,{new_password:t.state.new_password,new_password_repeat:t.state.new_password_repeat},{headers:a}).then((function(e){"204"==e.status&&(window.location="/signin")}))}),500)}},{key:"render",value:function(){return Object(n.jsxs)(E.a,{component:"main",maxWidth:"xs",style:{height:"90vh",paddingTop:"5%"},children:[Object(n.jsx)(F.a,{}),Object(n.jsxs)("div",{className:this.useStyles.paper,children:[Object(n.jsx)(_.a,{className:this.useStyles.avatar,children:Object(n.jsx)(B.a,{})}),Object(n.jsx)(f.a,{component:"h1",variant:"h5",children:"Change your password"}),Object(n.jsxs)("form",{className:this.useStyles.form,noValidate:!0,onSubmit:this.handleSubmit,children:[Object(n.jsx)(A.a,{onChange:this.handleChange,value:this.state.new_password,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",id:"password",label:"New Password",name:"new_password",autoFocus:!0}),Object(n.jsx)(A.a,{onChange:this.handleChange,value:this.state.new_password_repeat,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",id:"repeat_password",label:"Repeat New Password",name:"new_password_repeat",autoFocus:!0}),Object(n.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:this.useStyles.submit,children:"Submit"}),0!==this.state.errors.length?this.state.errors.map((function(e){return Object(n.jsx)("h5",{children:e})})):""]})]})]})}}]),a}(s.Component));a(330).config();var le=Object(b.a)((function(){return{root:{},avatar:{width:60,height:60}}})),de=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loggedIn:!0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){sessionStorage.getItem("token")||null!==sessionStorage.getItem("token")||this.setState({loggedIn:!1})}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsxs)(u.a,{children:[this.state.loggedIn?Object(n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(n.jsx)(p.a,{className:Object(m.a)(le.root),elevation:0,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(u.b,{to:"/"}),Object(n.jsx)(O.a,{flexGrow:1}),Object(n.jsx)(u.b,{to:"/logout",children:Object(n.jsx)(x.a,{color:"inherit",children:Object(n.jsx)(y.a,{})})})]})})}):null,Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{path:"/signin",children:Object(n.jsx)(M,{})}),Object(n.jsx)(j.b,{path:"/logout",children:Object(n.jsx)(re,{})}),Object(n.jsx)(j.b,{path:"/change-password-confirm",children:Object(n.jsx)(ce,{})}),Object(n.jsx)(j.b,{path:"/change-password",children:Object(n.jsx)(ie,{})}),Object(n.jsx)(j.b,{path:"/",children:Object(n.jsx)(ne,{})})]}),Object(n.jsxs)(f.a,{style:{marginTop:"30px",padding:"8px"},variant:"body2",color:"textSecondary",align:"center",children:["Copyright"," ",(new Date).getFullYear()," ","\xa9 Developed by ",Object(n.jsx)(u.b,{color:"inherit",href:"https://mijoski.com/",children:"Matej Mijoski"})]})]})})}}]),a}(s.Component),he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,379)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(de,{})}),document.getElementById("root")),he()}},[[333,1,2]]]);
//# sourceMappingURL=main.8dde270a.chunk.js.map